---
_id: bd7866fb-8397-462e-b181-b48894875925
category: Vue.js
topic: Watchers
difficulty: Hard
options:
  - id: 1
    option: onWatcherCleanup imported from vue will not execute if called after an await statement.
  - id: 2
    option: The cleanup function passed to the callback of watch or watchEffect will not execute if called after an await statement.
  - id: 3
    option: There is no difference; both behave the same way.
  - id: 4
    option: onWatcherCleanup imported from vue can only be used inside watchEffect, not watch.
correctOptionId: 1
referenceLink: https://vuejs.org/guide/essentials/watchers.html#side-effect-cleanup
---

::question{:type="questionType"}
Which of the following is a notable difference between the cleanup function passed to the callbacks of watch or watchEffect and the onWatcherCleanup function imported directly from vue?

::

::explanation{:type="explanationType"}

**Explanation: The major diiference is that onWatcherCleanup imported from vue will not execute if called after an await statement.**

<br />

```js
import { ref, watch, onWatcherCleanup } from "vue";

watch(id, async () => {
  await Promise.resolve("hello");

  // will not execute
  onWatcherCleanup(() => {
    // cleanup logic
  });
});
```

<br />

---

<br />

```js
import { ref, watch } from "vue";

watch(id, async (newValue, oldValue, onCleanup) => {
  await Promise.resolve("hello");

  // will execute
  onCleanup(() => {
    // cleanup logic
  });
});
```

<br />

::playgroundLink{href="https://play.vuejs.org/#eNp9Uk1v2zAM/SuELnWAzD5sp84JsHU5dIet2Ed70UW1mVStTAn6iFME+e+l5CYtiqIXmSIfnx8ftRffnKu3CcW5aEPntYsQMCa3lKQHZ32EPXhcz2FUsbubg6WbHKC/MKgoOTjA2tsBzpjjTJKkzlKIoHtY5L5qlnOlt9L9HFR4pA4qwvFamYTMZ/pjRM+UM1gsYS8JQI1KR7hifh2w9his2WIlxR0aY6WYfc3kAE0DozYGyEbAHXYpYk6/lVpVL8wAWac1WBu7YcYuQyC5iRTgkD/laJvJFjaELxEHZ1REvgG0Rt2igbX1Cyl0L8VyRRE9/A98XP6AtimACavJpezLMxS2nwbbo6kpDbd4ImibguOWtnn1LzEXMbDitd7U98ESb6uMwcLt4LRB/9tFzRNJcX4cUArFLo0/Sy56tviYZ0+6h3fy92GXc1JcsdXotyjFqRaV32Ccyqu/v3DH8anIkyTD6A+Kf/LyUtY4wb4n6ln2K1xRe1nenKbNv7DaRaRwHCoLLYspeCn4uV18MPqL3M/1l9LH6xSHJ6J1+kE="}
::

::
